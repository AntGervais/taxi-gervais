<div id='contact' class='pb-12 pt-6 bg-gray-50'>
  <div class='max-w-3xl mx-auto px-4 sm:px-6 lg:px-8'>
    <div class='bg-white rounded-2xl shadow-xl overflow-hidden'>
      <div class='bg-yellow-400 p-6 text-center'>
        <h2 class='text-2xl font-bold text-slate-900'>Réserver votre trajet</h2>
        <p class='text-slate-800 font-medium'>
          Appelez directement ou envoyez un message
        </p>
      </div>
      <div class='p-8'>
        <!-- Gros bouton Appel -->
        <div class='text-center mb-8'>
          <p class='text-gray-500 mb-4'>
            Pour une réponse immédiate, privilégiez l'appel :
          </p>
          <a
            href='tel:0633968023'
            class='inline-flex items-center justify-center bg-slate-900 text-white text-lg sm:text-xl font-bold px-8 py-5 rounded-full hover:bg-slate-800 transition transform hover:scale-105 shadow-lg w-full md:w-auto whitespace-nowrap'>
            <i class='fas fa-phone-alt mr-3 text-yellow-400'></i> 06 33 96 80 23
          </a>
        </div>

        <div class='relative flex py-5 items-center'>
          <div class='flex-grow border-t border-gray-300'></div>
          <span class='flex-shrink mx-4 text-gray-500 text-center text-sm sm:text-base'
            >Ou par écrit (réservation à l'avance)</span
          >
          <div class='flex-grow border-t border-gray-300'></div>
        </div>

        <!-- Formulaire avec attribut Netlify pour que ça marche sans serveur -->
        <form
          id='contact-form'
          name='contact'
          method='POST'
          action='/success'
          data-netlify='true'
          class='space-y-6 mt-6'>
          <div class='grid md:grid-cols-2 gap-6'>
            <div>
              <label class='block text-sm font-medium text-gray-700 mb-1'
                >Nom complet</label
              >
              <input
                type='text'
                name='nom'
                autocomplete='name'
                required
                class='w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none'
                placeholder='Votre nom'
              />
            </div>
            <div>
              <label class='block text-sm font-medium text-gray-700 mb-1'
                >Téléphone</label
              >
              <input
                type='tel'
                name='telephone'
                autocomplete='tel'
                required
                class='w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none'
                placeholder='06 .. .. .. ..'
              />
            </div>
          </div>

          <div class='grid md:grid-cols-2 gap-6'>
            <div>
              <label
                for='date'
                class='block text-sm font-medium text-gray-700 mb-1'
                >Date de la réservation</label
              >
              <input
                type='date'
                id='date'
                name='date'
                required
                class='w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none'
              />
            </div>
            <div>
              <label
                for='heure'
                class='block text-sm font-medium text-gray-700 mb-1'
                >Heure de la réservation</label
              >
              <input
                type='time'
                id='heure'
                name='heure'
                required
                class='w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none'
              />
            </div>
          </div>

          <div>
            <label class='block text-sm font-medium text-gray-700 mb-1'
              >Trajet (Départ / Arrivée)</label
            >
            <textarea
              name='trajet'
              required
              class='w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none h-24'
              placeholder='Ex: Gare de La Roche vers Rue de la Paix...'
            ></textarea>
          </div>

          <button
            id='submit-btn'
            type='submit'
            disabled
            class='w-full bg-gray-300 text-gray-500 font-bold py-3 rounded-lg cursor-not-allowed transition flex items-center justify-center border border-gray-300'>
            <span>Remplissez tous les champs</span>
            <i class='fas fa-paper-plane ml-2'></i>
          </button>
        </form>

        <script>
          const form = document.getElementById(
            "contact-form"
          ) as HTMLFormElement;
          const btn = document.getElementById(
            "submit-btn"
          ) as HTMLButtonElement;
          const inputs = form.querySelectorAll("input, textarea");

          function checkForm() {
            let isValid = true;
            inputs.forEach((input) => {
              if (
                input instanceof HTMLInputElement ||
                input instanceof HTMLTextAreaElement
              ) {
                if (!input.value.trim()) isValid = false;
              }
            });

            if (isValid) {
              btn.disabled = false;
              btn.classList.remove(
                "bg-gray-300",
                "text-gray-500",
                "cursor-not-allowed"
              );
              btn.classList.add(
                "bg-yellow-400",
                "text-slate-900",
                "hover:bg-yellow-500",
                "cursor-pointer"
              );
              btn.innerHTML = `<span>Envoyer la demande de réservation</span> <i class="fas fa-paper-plane ml-2"></i>`;
            } else {
              btn.disabled = true;
              btn.classList.add(
                "bg-gray-300",
                "text-gray-500",
                "cursor-not-allowed"
              );
              btn.classList.remove(
                "bg-yellow-400",
                "text-slate-900",
                "hover:bg-yellow-500",
                "cursor-pointer"
              );
              btn.innerHTML = `<span>Remplissez tous les champs</span> <i class="fas fa-paper-plane ml-2"></i>`;
            }
          }

          inputs.forEach((input) => {
            input.addEventListener("input", checkForm);
            input.addEventListener("change", checkForm);
          });
        </script>
      </div>
    </div>
  </div>
</div>
